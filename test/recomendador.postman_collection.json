{
	"info": {
		"_postman_id": "53a4ec56-6740-4db5-b0ce-c0eba514d3f9",
		"name": "recomendador",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "recomendaciones",
			"item": [
				{
					"name": "porSimilitudes pelicula",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "52114a13-6997-43d1-a7b9-5b61d553a996",
								"exec": [
									"pm.test(\"Status code is 200 or 417\", function () { pm.response.status == 200 ? pm.response.to.have.status(200) : pm.response.to.have.status(417)});",
									"pm.test(\"Return 12 movies\", function () { pm.expect(pm.response.json().results).to.have.lengthOf(12)});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{host}}/porSimilitudes/pelicula/tt0816692/12",
							"host": [
								"{{host}}"
							],
							"path": [
								"porSimilitudes",
								"pelicula",
								"tt0816692",
								"12"
							]
						}
					},
					"response": []
				},
				{
					"name": "porSimilitudes serie",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ddbaa53b-e1a4-49a1-9151-e3d5928e55f8",
								"exec": [
									"pm.test(\"Status code is 200 or 417\", function () { pm.response.status == 200 ? pm.response.to.have.status(200) : pm.response.to.have.status(417)});",
									"pm.test(\"Return 7 series\", function () { pm.expect(pm.response.json().results).to.have.lengthOf(7)});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{host}}/porSimilitudes/serie/tt0903747/7",
							"host": [
								"{{host}}"
							],
							"path": [
								"porSimilitudes",
								"serie",
								"tt0903747",
								"7"
							]
						}
					},
					"response": []
				},
				{
					"name": "aleatorio peliculas",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ddec6ca-9ed7-4499-8fb7-66a2d1356a07",
								"exec": [
									"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{host}}/aleatorio/peliculas/",
							"host": [
								"{{host}}"
							],
							"path": [
								"aleatorio",
								"peliculas",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "aleatorio series",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dab145f3-9ded-4ad6-9e83-295636d804ac",
								"exec": [
									"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{host}}/aleatorio/series/",
							"host": [
								"{{host}}"
							],
							"path": [
								"aleatorio",
								"series",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "lista negra pelis",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "19ce5ca5-6670-4590-abc9-3cfbf6a4b040",
						"exec": [
							"pm.test(\"Status code is 201\", function () { pm.response.to.have.status(201) });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "{{host}}/listaNegra/pelicula/126889",
					"host": [
						"{{host}}"
					],
					"path": [
						"listaNegra",
						"pelicula",
						"126889"
					]
				}
			},
			"response": []
		},
		{
			"name": "lista negra series",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "4147b9e0-c4d5-451c-9fbf-fd8e709cd5b4",
						"exec": [
							"pm.test(\"Status code is 201\", function () { pm.response.to.have.status(201) });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "{{host}}/listaNegra/serie/60574",
					"host": [
						"{{host}}"
					],
					"path": [
						"listaNegra",
						"serie",
						"60574"
					]
				}
			},
			"response": []
		},
		{
			"name": "lista negra pelis",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "f5fa406b-7859-4eaa-a691-30e399852596",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "39b86ae3-9fbf-412c-b0b4-528de27db119",
						"exec": [
							"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host}}/listaNegra/peliculas",
					"host": [
						"{{host}}"
					],
					"path": [
						"listaNegra",
						"peliculas"
					]
				}
			},
			"response": []
		},
		{
			"name": "lista negra series",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "4bd412f6-29de-4afa-b3d2-da933ac45eec",
						"exec": [
							"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host}}/listaNegra/series",
					"host": [
						"{{host}}"
					],
					"path": [
						"listaNegra",
						"series"
					]
				}
			},
			"response": []
		},
		{
			"name": "lista negra pelis",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "15b852e2-6842-4f9f-82b4-4ce72e029af2",
						"exec": [
							"pm.test(\"Status code is 202\", function () { pm.response.to.have.status(202) });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{host}}/listaNegra/pelicula/126889",
					"host": [
						"{{host}}"
					],
					"path": [
						"listaNegra",
						"pelicula",
						"126889"
					]
				}
			},
			"response": []
		},
		{
			"name": "lista negra series",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "3d4164d5-2608-4cf0-b708-b54f86f9c97e",
						"exec": [
							"pm.test(\"Status code is 202\", function () { pm.response.to.have.status(202) });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{host}}/listaNegra/serie/60574",
					"host": [
						"{{host}}"
					],
					"path": [
						"listaNegra",
						"serie",
						"60574"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{currentAccessToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "8e8e5f19-9e99-4321-badd-5c0822de8331",
				"type": "text/javascript",
				"exec": [
					"const echoPostRequest = {",
					"  url: 'https://fis-backend-login.herokuapp.com/api/v1/authenticate',",
					"  method: 'POST',",
					"  header: 'Content-Type:application/json',",
					"  body: {",
					"    mode: 'application/json',",
					"    raw: JSON.stringify(",
					"        {",
					"        \tlogin: \"admin\",",
					"        \tpassword: 'admin'",
					"        })",
					"  }",
					"};",
					"",
					"var getToken = true;",
					"",
					"if (!pm.environment.get('accessTokenExpiry') || ",
					"    !pm.environment.get('currentAccessToken')) {",
					"    console.log('Token or expiry date are missing')",
					"} else if (pm.environment.get('accessTokenExpiry') <= (new Date()).getTime()) {",
					"    console.log('Token is expired')",
					"} else {",
					"    getToken = false;",
					"    console.log('Token and expiry date are all good');",
					"}",
					"",
					"if (getToken === true) {",
					"    pm.sendRequest(echoPostRequest, function (err, res) {",
					"    console.log(err ? err : res.json());",
					"        if (err === null) {",
					"            console.log('Saving the token and expiry date')",
					"            var responseJson = res.json();",
					"            pm.environment.set('currentAccessToken', responseJson.token)",
					"    ",
					"            var expiryDate = new Date();",
					"            expiryDate.setSeconds(expiryDate.getSeconds() + 3000);",
					"            pm.environment.set('accessTokenExpiry', expiryDate.getTime());",
					"        }",
					"    });",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "dba7b5e9-b53a-4aac-8a09-5d7bde604722",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "6bdecd5d-f173-4b3c-b5d1-3081865d8b8a",
			"key": "host",
			"value": "http://127.0.0.1:3000/recomendador/v1",
			"type": "string"
		},
		{
			"id": "f3a00977-a564-435a-8b72-9b442ecaea15",
			"key": "currentAccessToken ",
			"value": "",
			"type": "string"
		},
		{
			"id": "029aa0fd-28e7-4b96-a672-572e56ebf87d",
			"key": "accessTokenExpiry",
			"value": "",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}